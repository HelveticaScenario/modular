/* auto-generated by NAPI-RS */
/* eslint-disable */
export declare class Synthesizer {
  /** Run the audio thread with cpal */
  constructor()
  stop(): void
  isStopped(): boolean
  sampleRate(): number
  channels(): number
  getScopes(): Array<[ScopeItem, Float32Array]>
  updatePatch(patch: PatchGraph): Array<ApplyPatchError>
  startRecording(path?: string | undefined | null): string
  stopRecording(): string | null
  isRecording(): boolean
  getHealth(): AudioBudgetSnapshot
  getModuleStates(): Record<string, any>
}

export interface ApplyPatchError {
  message: string
  errors?: Array<ValidationError>
}

export interface AudioBudgetSnapshot {
  totalSamples: bigint
  totalTimeNs: bigint
  /** Average nanoseconds per sample over snapshot window */
  avgNsPerSample: number
  /** Average real-time usage (1.0 == real-time) */
  avgUsage: number
  /** Worst-case nanoseconds per sample (peak density) */
  peakNsPerSample: number
  /** Worst-case real-time usage (1.0 == real-time) */
  peakUsage: number
}

export interface AudioThreadHealthSnapshot {
  estimatedFrameBudgetUsageMax: number
}

export declare function getSchemas(): Array<ModuleSchema>

export declare function parsePattern(source: string): any

/** Detailed validation error for patch validation */
export interface ValidationError {
  field: string
  message: string
  location?: string
}
export interface ModuleIdRemap {
  from: string
  to: string
}

export interface ModuleSchema {
  name: string
  description: string
  paramsSchema: Record<string, unknown>
  outputs: Array<OutputSchema>
  positionalArgs: Array<PositionalArg>
}

export interface ModuleState {
  id: string
  moduleType: string
  idIsExplicit?: boolean
  params: any
}

export interface OutputSchema {
  name: string
  description: string
  default: boolean
}

export interface PatchGraph {
  modules: Array<ModuleState>
  moduleIdRemaps?: Array<ModuleIdRemap>
  scopes: Array<Scope>
}

export interface PositionalArg {
  name: string
  optional: boolean
}

export interface Scope {
  item: ScopeItem
  msPerFrame: number
  triggerThreshold?: number
}

export type ScopeItem =
  | { type: 'ModuleOutput', moduleId: string, portName: string }
